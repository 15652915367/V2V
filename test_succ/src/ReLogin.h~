#ifndef  RELOGIN_H_
#define  RELOGIN_H_

#pragma once


#include "Client.h"
#include "MessageHandler.h"
#include "MessageDecoder.h"
#include "CommonUtility.h"
#include "Constant.h"
#include "Message.h"
#include "MessageDispatcher.h"
#include "ConnectionData.h"

#define LOGIN_UNKNOWN		2
#define LOGIN_ACCEPTED 		1
#define LOGIN_REFUSED 		0


//int loginState = LOGIN_UNKNOWN;


void loginRequest(const muduo::net::TcpConnectionPtr& conn, muduo::net::EventLoop* loop_, int* restLoginTimes){
	 if(/*loginState == LOGIN_UNKNOWN*/ && *restLoginTimes > 0){
		 MessageHandler::send(conn, LOGIN_REQUEST);
		 LOG_INFO <<"---***---"<< (*restLoginTimes)-- <<"---***---";
		 loop_ ->runAfter(60*1, boost::bind(loginRequest, conn, loop_, restLoginTimes));
	 }
	 else{
		//cancel the link
	 }
	 
}





#endif

